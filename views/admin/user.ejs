<% include partials/header %>


<div class="container">
    <div class="row">
        <div class="col-8">
            <p>Navn: <%= user.firstName + " " + user.lastName %></p>
            <p>Adresse: <%= user.street + " " + user.houseNumber %></p>
            <p><%= user.zipcode + " " + user.town %></p>
            <p>Telefon: <%= user.phone %></p>
        </div>
        <div class="col-4">
            <img src="<%= user.avatarURL %>" width="200">
        </div>
    </div>

    <a href="#" class="btn btn-primary">Chat</a>

    <!-- Vægt Card -->
    <div class="row my-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-9">
                            <h4>Vægt</h4>
                        </div>
                        <div class="col-3">
                            <a href="/" class="btn btn-primary float-right">Redigér</a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <p> Start vægt: <%= user.weightStats.startWeight %></p>
                    <p> Nuværende vægt: <%= user.weightStats.currentWeight %></p>
                    <p> Mål vægt: <%= user.weightStats.targetWeight %></p>
                    <p> Vægt fremskridt: <%= user.weightStats.weightProgress.toFixed(1) %></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Træning Card -->

    <script>
            function appendPas() {
                $("#pasContainer").append(
                `  
                <p> HEY </p>
                
                `
                );
        
            }

            function editExercise(id, workoutId) {
                let selectedExercise = $("#workoutName" + workoutId); 
                let selectedSet = $("#set" + workoutId);
                let selectedReps = $("#reps" + workoutId);


                $("#" + id).replaceWith(
                `  
                <form action="/admin/user/<%= user._id %>/update/workout/" + workoutId>
                    <input type="text" name="workoutName">
                    <input type="text" name="set">
                    <input type="text" name="reps">
                </form>
                
                `
                );

                
            }
        
    </script>

    <form action="/admin/user/<%= user._id %>/update/workout/" + workoutId>
        <input type="text" name="workoutName">
        <input type="text" name="set">
        <input type="text" name="reps">
    </form>

    <div class="row my-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-9">
                            <h4>Træningsprogram</h4>
                        </div>
                        <div class="col-3">
                            <button class="btn btn-primary float-right" onclick="appendPas()">Nyt pas</button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row" id="pasContainer">
                        <% user.trainingStats.trainingPases.forEach((trainingPas) => { %>
                            <div class="col-6">
                                <div class="card m-1 my-4">
                                    <div class="card-header text-white bg-dark">
                                        <div class="row">
                                            <div class="col-8">
                                                <h5> Pas <%= trainingPas.pasNumber %> </h5>
                                            </div>
                                            <div class="col-4">
                                                <button  class="btn btn-sm btn-success float-right">
                                                    <i class="fa fa-lg fa-pencil-square-o" aria-hidden="true"></i>
                                                </button>                                                    
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body pt-0 bg-light">
                                    <% trainingPas.muscleGroups.forEach((muscleGroup) => { %>
                                        <h5 class="mt-4 text-capitalize"> <%= muscleGroup.name %> </h5>
                                        <div class="list-group list-unstyled" style="position: relative;">
                                            <% muscleGroup.assignedWorkouts.forEach((workout) => { %>
                                                <p class=" mt-1"> 
                                                    <span> 
                                                        <i class="fa fa-trash text-danger" aria-hidden="true"></i>
                                                    </span>
                                                    <span onclick="editExercise()"> 
                                                        <i class="fa fa-pencil-square-o text-warning" aria-hidden="true"></i>
                                                    </span>
                                                    <span id="trash<%= workout._id %>">
                                                        <span id="workoutName<%= workout._id %>" class="text-capitalize"> <%= workout.name %> </span> 
                                                        <span id="reps<%= workout._id %>" class="float-right"> <%= workout.reps %> gentagelser </span>                                                        
                                                        <span id="sæt<%= workout._id %>" class="float-right"> <%= workout.sæt %> sæt af </span>
                                                    </span>
                                                </p>
                                            <% }) %>
                                        </div>
                                        <hr>
                                    <% }) %>
                                    </div>        
                                </div>
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row my-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-9">
                            <h4>Kostplan</h4>
                        </div>
                        <div class="col-3">
                            <a   href="/" class="btn btn-primary float-right">Nyt pas</a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                </div>
            </div>
        </div>
    </div>

</div>

<% include partials/footer %>